<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Birthday Fate Cards</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700;900&family=Cormorant+Garamond:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#130b2b;
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.68);
      --accent:#8b5cf6;
      --accent2:#22c55e;
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius: 22px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: "Cormorant Garamond", ui-serif, Georgia, serif;
      --display: "Cinzel", ui-serif, Georgia, serif;
      --gold: #d8b25c;
    }

    *{box-sizing:border-box}
    html,body{height:100%}

    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      overflow-x:hidden;
      background:
        radial-gradient(1200px 900px at 20% 10%, rgba(216,178,92,.10), transparent 55%),
        radial-gradient(900px 700px at 80% 30%, rgba(139,92,246,.22), transparent 60%),
        radial-gradient(800px 600px at 60% 90%, rgba(34,197,94,.12), transparent 60%),
        linear-gradient(180deg, #070a14, #0c0720);
    }

    .wrap{width:min(860px, 100%);}
    h1{ font-family: var(--display); margin:0 0 10px; font-size:clamp(24px, 4vw, 36px); }
    .sub{ margin:0 0 16px; color: rgba(255,255,255,.75); font-size:15px; white-space:pre-wrap; }

    .card{
      position:relative; border-radius:var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
      border: 1px solid rgba(216,178,92,.35); box-shadow:var(--shadow); padding:28px;
    }

    .panel{ border-radius:18px; border: 1px solid rgba(216,178,92,.22); background: rgba(0,0,0,.25); padding:14px; }
    .countdown{ margin:14px 0 10px; display:grid; grid-template-columns:repeat(4,1fr); gap:10px; }
    .tile{ border-radius:18px; border: 1px solid rgba(216,178,92,.22); background: rgba(0,0,0,.26); padding:14px 12px; text-align:center; }
    .num{ font-family:var(--mono); font-size:22px; font-weight:850; }
    .label{ font-size:12px; color: var(--gold); }

    .actions{ display:flex; flex-wrap:wrap; gap:10px; margin-top:12px; }
    button{ border:0; cursor:pointer; border-radius:14px; padding:12px 14px; font-weight:750; color:var(--text); background:rgba(255,255,255,.1); }
    .primary{ background: linear-gradient(135deg, rgba(216,178,92,.9), rgba(139,92,246,.75)); }

    /* Fate Cards */
    .cards{ margin-top:12px; display:grid; grid-template-columns: repeat(2, 1fr); gap:12px; perspective: 1000px; }
    .fate{ position:relative; min-height:160px; transition: transform 0.6s; transform-style: preserve-3d; cursor:pointer; }
    .fateInner{ position:relative; width:100%; height:100%; transform-style: preserve-3d; transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
    .fate.revealed .fateInner{ transform: rotateY(180deg); }

    .fateFace{
      position:absolute; inset:0; backface-visibility: hidden; -webkit-backface-visibility: hidden;
      border-radius:20px; border: 1px solid rgba(216,178,92,.3); padding:16px;
      display:flex; flex-direction:column; justify-content:space-between; background: rgba(0,0,0,.3);
    }
    .fateBack{ transform: rotateY(180deg); background: rgba(20, 10, 40, 0.5); }

    /* ‚úÖ You Chose Badge */
    .pickBadge {
      position: absolute;
      top: 10px; right: 10px;
      padding: 4px 10px; border-radius: 8px;
      font-family: var(--mono); font-size: 10px; font-weight: 800;
      color: #000; background: var(--gold);
      z-index: 10; pointer-events: none;
      backface-visibility: visible;
    }
    /* ÁøªËΩâÂæå‰øÆÊ≠£Èè°ÂÉè‰∏¶‰øùÊåÅÂú®Âè≥‰∏äËßí */
    .fate.revealed .pickBadge { transform: rotateY(180deg); }

    .fateTitle{ font-weight:900; font-family:var(--display); font-size:16px; color:var(--gold); }
    .fateHint{ font-size:13px; color:rgba(255,255,255,.6); margin-top:5px; }
    .spark{ position:absolute; bottom:15px; left:15px; font-size:11px; color:var(--gold); font-family:var(--mono); }
    
    .fateRevealTitle { font-family: var(--display); font-size: 18px; margin-bottom: 5px; color: var(--gold); }
    .fateRevealMeta { font-size: 13px; line-height: 1.5; white-space: pre-wrap; }
    .linkBtn { font-size: 12px; color: var(--gold); text-decoration: underline; margin-top: 10px; }

    .confetti{position:fixed;inset:0;pointer-events:none;z-index:999;display:none;}
    .confetti span{position:absolute;width:10px;height:10px;animation:fall 1.5s linear forwards;}
    @keyframes fall{to{transform:translateY(100vh) rotate(720deg);}}

    @media (max-width: 560px){
      .cards{grid-template-columns: 1fr;}
      .countdown{grid-template-columns: repeat(2, 1fr);}
    }
  </style>
</head>
<body>
  <div class="confetti" id="confetti"></div>

  <main class="wrap">
    <section class="card">
      <h1 id="title">Hey ‚ú®</h1>
      <p class="sub" id="subtitle"></p>

      <div class="panel">
        <div class="countdown">
          <div class="tile"><div class="num" id="d">--</div><div class="label">days</div></div>
          <div class="tile"><div class="num" id="h">--</div><div class="label">hours</div></div>
          <div class="tile"><div class="num" id="m">--</div><div class="label">mins</div></div>
          <div class="tile"><div class="num" id="s">--</div><div class="label">secs</div></div>
        </div>
        <div id="dateLine" style="font-size:12px; opacity:0.6; margin-top:10px;"></div>
        <div class="actions">
          <button class="primary" id="openBtn">Open</button>
        </div>
      </div>

      <div id="flow" style="display:none; margin-top:20px;">
        <p class="sub" id="openingText"></p>
        <div class="cards">
          <div class="fate" id="cardA">
            <div class="fateInner">
              <div class="fateFace fateFront">
                <div>
                  <div class="fateTitle">Card A</div>
                  <div class="fateHint">ÈÅ∏‰∏≠ÁöÑÂ∞áÊúÉÂÑ™ÂÖàÊè≠Êõâ„ÄÇ</div>
                </div>
                <div class="spark">‚ú¶ tap to pick</div>
              </div>
              <div class="fateFace fateBack">
                <div class="fateRevealTitle"></div>
                <div class="fateRevealMeta"></div>
                <a class="linkBtn fateRevealLink" target="_blank">Open map</a>
              </div>
            </div>
          </div>
          <div class="fate" id="cardB">
            <div class="fateInner">
              <div class="fateFace fateFront">
                <div>
                  <div class="fateTitle">Card B</div>
                  <div class="fateHint">Âè¶‰∏ÄÁ®ÆÂèØËÉΩÊÄß„ÄÇ</div>
                </div>
                <div class="spark">‚ú¶ tap to pick</div>
              </div>
              <div class="fateFace fateBack">
                <div class="fateRevealTitle"></div>
                <div class="fateRevealMeta"></div>
                <a class="linkBtn fateRevealLink" target="_blank">Open map</a>
              </div>
            </div>
          </div>
        </div>

        <div class="actions" id="stepActions" style="display:none; margin-top:20px;">
          <button class="primary" id="revealOtherBtn">ÁúãÁúãÂè¶‰∏ÄÂºµÂç°</button>
          <button id="resetBtn">ÈáçÈÅ∏‰∏ÄÊ¨°</button>
        </div>
      </div>
    </section>
  </main>

  <script>
    const CONFIG = {
      to: "Addie",
      from: "Liz",
      countdownTo: "2026-03-06T00:00",
      openingText: "ÂòøÂòøÔºåÈÅ∏‰∏ÄÂºµÂç°ÁâáÂêßÔºÅ\nÈÄôÂ∞áÊ±∫ÂÆö‰Ω†‰ªäÂπ¥ÁîüÊó•ÁöÑÂëΩÈÅã ‚ú®",
      cardA: { title: "A CUT ¬∑ ÂúãË≥ì", dateLabel: "2026/3/6", time: "19:00", note: "Âè™Ë¶Å‰∫∫Âá∫ÁèæÂ∞±Â•Ωüíï", mapUrl: "https://maps.app.goo.gl/YyZ9L" },
      cardB: { title: "Êº¢‰æÜÈ£ØÂ∫ó‰∏ÄÊôö", dateLabel: "2026/3/7", time: "Check-in ÂæÖÂÆö", note: "ÈöîÂ§©ÈÇÑÊúâÂ≥∂Ë™ûÊó©È§êÂî∑ÔºÅ", mapUrl: "https://maps.app.goo.gl/hotel" }
    };

    const el = id => document.getElementById(id);

    function init() {
      el("title").textContent = "Hi, " + CONFIG.to;
      el("subtitle").textContent = "From: " + CONFIG.from + "\nË∑ùÈõ¢ÁîüÊó•ÈÇÑÊúâÔºö";
      el("openingText").textContent = CONFIG.openingText;

      // Countdown logic
      const target = new Date(CONFIG.countdownTo).getTime();
      setInterval(() => {
        const now = new Date().getTime();
        const diff = target - now;
        if (diff < 0) return;
        el("d").textContent = Math.floor(diff / 86400000);
        el("h").textContent = Math.floor((diff % 86400000) / 3600000);
        el("m").textContent = Math.floor((diff % 3600000) / 60000);
        el("s").textContent = Math.floor((diff % 60000) / 1000);
      }, 1000);

      el("openBtn").addEventListener("click", () => {
        el("flow").style.display = "block";
        el("flow").scrollIntoView({ behavior: "smooth" });
      });

      let picked = null;

      function addBadge(cardId) {
        const card = el(cardId);
        if (card.querySelector(".pickBadge")) return;
        const badge = document.createElement("div");
        badge.className = "pickBadge";
        badge.textContent = "YOU CHOSE";
        card.appendChild(badge);
      }

      function reveal(cardId, data) {
        const card = el(cardId);
        card.querySelector(".fateRevealTitle").textContent = data.title;
        card.querySelector(".fateRevealMeta").textContent = `${data.dateLabel}\n${data.time}\n${data.note}`;
        card.querySelector(".fateRevealLink").href = data.mapUrl;
        
        // ÁßªÈô§ tap to pick
        const spark = card.querySelector(".spark");
        if(spark) spark.remove();

        card.classList.add("revealed");
      }

      el("cardA").onclick = () => {
        if (picked) return;
        picked = "A";
        addBadge("cardA");
        reveal("cardA", CONFIG.cardA);
        el("stepActions").style.display = "flex";
      };

      el("cardB").onclick = () => {
        if (picked) return;
        picked = "B";
        addBadge("cardB");
        reveal("cardB", CONFIG.cardB);
        el("stepActions").style.display = "flex";
      };

      el("revealOtherBtn").onclick = () => {
        if (picked === "A") reveal("cardB", CONFIG.cardB);
        else reveal("cardA", CONFIG.cardA);
        el("revealOtherBtn").style.display = "none";
      };

      el("resetBtn").onclick = () => location.reload();
    }

    init();
  </script>
</body>
</html>
